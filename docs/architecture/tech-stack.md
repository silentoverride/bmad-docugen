# Tech Stack
| Category              | Technology             | Version   | Purpose                                                         | Rationale                                                                                                   |
|-----------------------|------------------------|-----------|-----------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------|
| Frontend Language     | TypeScript             | 5.5       | Typed language for admin UI and shared packages                 | Aligns with deterministic goals; single language across stack reduces schema drift.                         |
| Frontend Framework    | Next.js                | 14.2      | Admin interface with SSR/ISR and edge-ready routing             | Pairs with Dockerized self-hosting; supports React Server Components for manifest views.                   |
| UI Component Library  | Radix UI + shadcn/ui   | 1.8       | Accessible primitives and composable admin components           | Matches accessibility goals while staying unopinionated; readily themable for NAB fidelity.                |
| State Management      | TanStack Query         | 5.51      | Data fetching/cache for manifest telemetry in admin UI          | Handles real-time status and stale-data guarantees without custom caches, improving deterministic UX.      |
| Backend Language      | TypeScript             | 5.5       | Fastify API, workers, CLI shared logic                          | Single language for API/worker/CLI ensures shared types and simplifies maintenance.                        |
| Backend Framework     | Fastify                | 4.28      | REST API server running inside Docker                           | High-performance, schema-driven validation; great fit for JSON-heavy orchestration.                        |
| API Style             | REST (OpenAPI 3.1)     | 3.1 spec  | Primary interface for CLI/admin and integrator webhooks         | Simple for automation clients; OpenAPI enables codegen and contract testing required for compliance.       |
| Database              | PostgreSQL             | 16        | Run metadata, manifests, audit records                          | Strong relational guarantees and JSONB support for manifest storage; easy to run via Docker locally.       |
| Cache                 | Redis                  | 7.2       | BullMQ queues, rate limiting, transient state                   | Lightweight, deterministic queue backbone for rendering jobs and CLI throttling.                           |
| File Storage          | MinIO                  | 2025-01-20 | S3-compatible storage for PDFs & signed bundles           | Emulates S3 locally, enabling identical packaging and hash verification flows without cloud access.        |
| Authentication        | Keycloak               | 24        | OAuth2/OpenID provider for admin UI, CLI device flow            | Self-hosted container with RBAC, audit trails, and token introspection aligned with compliance needs.      |
| Frontend Testing      | Vitest + Testing Library| 1.6 / 14 | Unit/component tests for admin UI                               | Fast TypeScript-native runner plus familiar RTL APIs keeps UI deterministic and debuggable.                |
| Backend Testing       | Vitest + Supertest     | 1.6 / 6.4 | API/service unit & integration tests                            | Shares tooling with frontend, enabling cross-stack mocks; Supertest simplifies Fastify route coverage.     |
| E2E Testing           | Playwright             | 1.48      | CLI/Admin end-to-end and PDF regression harness                 | Handles multi-browser testing plus PDF snapshot validation required for NAB fidelity checks.               |
| Build Tool            | Turborepo              | 2.0       | Orchestrate builds/tests across monorepo                        | Matches repo structure and maximizes caching inside containers or CI.                                      |
| Bundler               | tsup + Next.js SWC     | 8.1 / built-in | Bundle CLI/API/worker packages and admin app               | tsup provides fast ESM/CJS builds for Node targets; Next.js SWC handles admin with zero extra config.      |
| IaC Tool              | Docker Compose         | 2.27      | Define local self-hosted stack (services, volumes, env)         | Deterministic, version-controlled infrastructure definition shipping with repo for every developer.        |
| CI/CD                 | GitHub Actions         | Hosted 2025 | Run tests, build images, publish Compose artifacts            | Cloud CI matches repo location, supports matrix jobs, exports Docker images for teammates.               |
| Monitoring            | Prometheus + Grafana   | 2.53 / 11 | Observe worker/API metrics inside local stack                   | Lightweight dockerized observability mirroring production telemetry goals.                                |
| Logging               | Loki + Promtail        | 3.0 / 3.0 | Centralize structured logs from API/worker containers           | Ensures manifest/audit logs stay queryable and exportable for compliance reviews.                          |
| CSS Framework         | Tailwind CSS           | 3.4       | Utility-first styling for admin UI                              | Speeds iteration, aligns with shadcn defaults, and supports design tokens for NAB brand fidelity.          |
