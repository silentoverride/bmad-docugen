# Risk Profile: Story 2.1

Date: 2025-09-26
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 5
- Critical Risks: 1
- High Risks: 3
- Risk Score: 45/100

The responsible lending alignment engine underpins policy enforcement across DocuGen. The highest exposures concentrate on data reconciliation accuracy and diagnostic traceability. Without robust guardrails, mismatches between artefacts or misconfigured rule toggles will slip through, compromising compliance assurances.

## Critical Risks Requiring Immediate Attention

### 1. DATA-007: False Negatives in Cross-Artifact Reconciliation
**Score:** 9 (Critical)

- **Probability:** High (3) – Complex income scenarios and floating-point rounding frequently break naive comparisons.
- **Impact:** High (3) – Undetected mismatches invalidate responsible lending checks, exposing DocuGen to regulatory penalties.
- **Mitigation:**
  - Use tolerance-aware comparisons with currency-specific precision rules and multi-period alignment.
  - Add golden fixtures for irregular cadences (contractors, allowances) to regression suite.
  - Instrument reconciliation failures with telemetry for rapid triage.
- **Testing Focus:** High-variance integration tests covering edge personas; fuzz tests targeting rounding and cadence variance.

## High-Risk Items

### 2. TECH-007: Rule Configuration Drift from Defaults
**Score:** 6 (High)

- **Probability:** Medium (2) – Configuration toggles managed manually may diverge from brief defaults or schema expectations.
- **Impact:** High (3) – Incorrect thresholds allow non-compliant bundles or block valid ones, eroding trust from operators.
- **Mitigation:**
  - Store configuration in version-controlled defaults with schema validation and change history.
  - Provide CLI command that reports active rule configuration vs. baseline.
  - Require reviews including compliance sign-off for toggle changes.
- **Testing Focus:** Unit tests covering configuration parsing; integration tests verifying CLI reports and override application.

### 3. BUS-003: Missing Compliance Metadata in Manifests
**Score:** 6 (High)

- **Probability:** Medium (2) – New rules may be added without updating manifest diagnostics payloads.
- **Impact:** High (3) – Audit traceability fails, forcing manual forensic work or causing audit rejection.
- **Mitigation:**
  - Enforce manifest schema requiring rule ids and remediation hints for each failure.
  - Add CI check ensuring new rules include documentation references and manifest mapping.
  - Provide diff tooling that flags diagnostics omissions.
- **Testing Focus:** Manifest contract tests verifying rule references; schema enforcement tests.

### 4. OPS-006: Error Messaging Fails to Guide Operators
**Score:** 6 (High)

- **Probability:** Medium (2) – Complex rule chains can surface generic error messages.
- **Impact:** High (3) – Increases operator handling time, blocks resolution loops, and encourages risky manual overrides.
- **Mitigation:**
  - Standardise diagnostic payloads with actionable recommendations and documentation links.
  - Include operator usability tests on high-frequency failure scenarios.
  - Capture telemetry on error dismissal times to refine messaging.
- **Testing Focus:** CLI/UI UX tests covering remediation flows; telemetry validation for time-to-resolution tracking.

## Medium-Risk Items

### 5. SEC-005: Leakage of Sensitive Income Data in Diagnostics
**Score:** 4 (Medium)

- **Probability:** Low (1) – Diagnostics might include raw amounts or employer info when sent to logs/alerts.
- **Impact:** High (3) – Violates privacy constraints and compliance policies if exposed beyond authorised boundaries.
- **Mitigation:**
  - Scrub or mask sensitive fields in diagnostics while retaining identifiers needed for resolution.
  - Restrict logging destinations and enforce RBAC on dashboards containing diagnostics.
  - Conduct security reviews of logging payloads before release.
- **Testing Focus:** Security-focused tests verifying redaction and access controls; log sampling in staging.

## Risk Distribution

### By Category
- Data: 1 risk (1 critical)
- Technical: 1 risk (0 critical, 1 high)
- Business: 1 risk (0 critical, 1 high)
- Operational: 1 risk (0 critical, 1 high)
- Security: 1 risk (0 critical, 0 high, 1 medium)
- Performance: 0 risks

### By Component
- Reconciliation engine: 2 risks
- Configuration management: 1 risk
- Manifest diagnostics: 1 risk
- Logging/telemetry: 1 risk

## Risk Matrix

| Risk ID  | Description                                   | Probability | Impact | Score | Priority |
|----------|-----------------------------------------------|-------------|--------|-------|----------|
| DATA-007 | False negatives in cross-artifact reconciliation | High (3)  | High (3) | 9   | Critical |
| TECH-007 | Rule configuration drift from defaults         | Medium (2) | High (3) | 6   | High     |
| BUS-003  | Missing compliance metadata in manifests       | Medium (2) | High (3) | 6   | High     |
| OPS-006  | Error messaging fails to guide operators       | Medium (2) | High (3) | 6   | High     |
| SEC-005  | Leakage of sensitive income data in diagnostics | Low (1)    | High (3) | 3   | Medium   |

## Detailed Risk Register

| Risk ID  | Category | Components Affected                 | Detection Method                         | Mitigation Owner       | Residual Risk |
|----------|----------|-------------------------------------|------------------------------------------|------------------------|----------------|
| DATA-007 | Data     | Rule engine, reconciliation modules | Edge-case regression suite, fuzz testing | Compliance Engineering | Low after deterministic checks |
| TECH-007 | Technical | Config service, CLI reporting      | Config diff tooling, schema validation   | Platform Engineering   | Medium – config churn ongoing |
| BUS-003  | Business | Manifest builder, documentation    | Manifest schema checks, doc reviews      | Product & Compliance   | Medium – relies on governance |
| OPS-006  | Operational | CLI/UI messaging, telemetry      | UX testing, telemetry dashboards         | Operations Enablement  | Medium – dependent on feedback loops |
| SEC-005  | Security | Logging pipeline, alerting         | Security review, automated redaction tests | Security Engineering | Low with masking enforced |

## Risk-Based Testing Strategy

### Priority 1: Critical & High Risks
- Expand reconciliation regression suite with tolerance-aware comparisons (DATA-007).
- Automate configuration diff checks and manifest diagnostic validations (TECH-007, BUS-003).
- Run UX-focused integration tests verifying remediation guidance accuracy (OPS-006).

### Priority 2: Medium Risks
- Security regression ensuring diagnostics redact sensitive fields (SEC-005).

### Priority 3: Baseline Regression
- Standard unit tests for rule functions and CLI error formatting.
- Smoke tests confirming manifests include diagnostics references on failure cases.

## Risk Acceptance Criteria

### Must Fix Before Production
- DATA-007 requires deterministic reconciliation coverage before enabling policy enforcement.
- TECH-007/BUS-003 must have governance and automation in place to prevent misconfigurations.

### Can Deploy with Mitigation
- OPS-006 acceptable with documented remediation backlog and telemetry monitoring.
- SEC-005 acceptable if masking is verified and access controls are enforced.

### Accepted Risks
- None accepted at this stage.

## Monitoring Requirements
- Track reconciliation failure rates, configuration changes, and operator remediation times.
- Monitor diagnostic log access to ensure RBAC compliance.

## Risk Review Triggers
- Introduction of new rule categories or toggles.
- Detection of recurring reconciliation mismatches or operator complaints.
- Updates to compliance documentation affecting manifest requirements.

## Recommendations Summary
- Harden reconciliation logic with precision-aware testing.
- Govern rule configuration changes through automation and compliance sign-off.
- Elevate diagnostic quality while keeping sensitive data protected.

Risk profile: docs/qa/assessments/2.1-risk-20250926.md
