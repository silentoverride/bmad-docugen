# Risk Profile: Story 5.1

Date: 2025-09-26
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 5
- Critical Risks: 1
- High Risks: 3
- Risk Score: 45/100

The versioned compliance rule library formalises policy governance. The primary threat is publishing rule changes without semantic versioning or changelog accuracy, leading to silent policy regressions.

## Critical Risks Requiring Immediate Attention

### 1. DATA-020: Rule Changes Released Without Accurate SemVer & Changelog
**Score:** 9 (Critical)

- **Probability:** High (3) – Manual version bumps and changelog edits are error-prone.
- **Impact:** High (3) – Downstream teams implement outdated rules, violating compliance commitments.
- **Mitigation:**
  - Automate release process with conventional commit parsing and changelog generation.
  - Block publishes unless diff command confirms metadata completeness.
  - Capture release approvals with compliance sign-off tied to version tags.
- **Testing Focus:** Automated tests verifying version increments vs change type; changelog validation in CI.

## High-Risk Items

### 2. TECH-015: `docugen compliance diff` Produces Incomplete Deltas
**Score:** 6 (High)

- **Probability:** Medium (2) – New rule attributes or metadata may not be accounted for in diff logic.
- **Impact:** High (3) – Implementers miss breaking changes, causing production regressions.
- **Mitigation:**
  - Maintain comprehensive fixture set for diff command covering additive, breaking, and metadata changes.
  - Integrate diff output into CI gating to ensure accuracy before release.
  - Provide automated tests to detect new rule fields lacking diff rendering.
- **Testing Focus:** CLI integration tests with fixture matrix; snapshot comparisons of diff output.

### 3. SEC-016: Rule Package Publishing Pipeline Lacks Approval Controls
**Score:** 6 (High)

- **Probability:** Medium (2) – Without gated approvals, developers can publish rule updates directly.
- **Impact:** High (3) – Unreviewed rules ship, possibly weakening compliance checks.
- **Mitigation:**
  - Require code owners, compliance sign-off, and security review before release tags.
  - Enforce publish via CI pipeline with approval steps; disable direct `npm publish` capability.
  - Monitor package registry for out-of-band releases.
- **Testing Focus:** Process audits; attempts to publish without approvals should fail in staging.

### 4. OPS-021: Regression Suite Coverage Inadequate for Baseline Scenarios
**Score:** 6 (High)

- **Probability:** Medium (2) – Additional rules may arrive faster than test scenarios.
- **Impact:** High (3) – Policy regressions slip through, requiring emergency patches.
- **Mitigation:**
  - Tie test checklist to rule categories; require coverage additions with each new rule.
  - Track coverage metrics and block release if baseline scenarios missing.
  - Integrate with QA gates to ensure regression suite runs on every PR touching rules.
- **Testing Focus:** Coverage reporting; CI enforcement verifying baseline suite execution.

## Medium-Risk Items

### 5. BUS-016: Metadata for Effective Dates & Approvals Becomes Stale
**Score:** 4 (Medium)

- **Probability:** Medium (2) – Updating metadata fields manually is easy to forget.
- **Impact:** Medium (2) – Auditors lack clear trail; enforcement windows misquoted.
- **Mitigation:**
  - enforce schema requiring effective date/approver; block release if missing.
  - Sync metadata with compliance evidence store automatically.
  - Provide dashboards tracking metadata completeness.
- **Testing Focus:** Schema validation tests; metadata completeness checks in CI.

## Risk Distribution

### By Category
- Data: 1 risk (1 critical)
- Technical: 1 risk (0 critical, 1 high)
- Security: 1 risk (0 critical, 1 high)
- Operational: 1 risk (0 critical, 1 high)
- Business: 1 risk (0 critical, 0 high, 1 medium)

### By Component
- Versioning & changelog: 1 risk
- Diff command: 1 risk
- Publishing approvals: 1 risk
- Regression suite: 1 risk
- Metadata governance: 1 risk

## Risk Matrix

| Risk ID  | Description                                             | Probability | Impact | Score | Priority |
|----------|---------------------------------------------------------|-------------|--------|-------|----------|
| DATA-020 | Rule changes released without accurate SemVer/changelog | High (3)    | High (3) | 9   | Critical |
| TECH-015 | `docugen compliance diff` produces incomplete deltas     | Medium (2)  | High (3) | 6   | High     |
| SEC-016  | Rule package publishing lacks approval controls         | Medium (2)  | High (3) | 6   | High     |
| OPS-021  | Regression suite coverage inadequate                    | Medium (2)  | High (3) | 6   | High     |
| BUS-016  | Metadata for effective dates/approvals becomes stale    | Medium (2)  | Medium (2) | 4 | Medium   |

## Detailed Risk Register

| Risk ID  | Category | Components Affected                    | Detection Method                                | Mitigation Owner      | Residual Risk |
|----------|----------|----------------------------------------|-------------------------------------------------|-----------------------|----------------|
| DATA-020 | Data     | Rule package versioning, changelog     | CI validation, release reviews                  | Compliance Engineering | Medium – relies on automation |
| TECH-015 | Technical | Diff command, CLI tooling             | Integration tests, snapshot comparisons         | Tooling Team          | Medium – needs upkeep |
| SEC-016  | Security | Publish pipeline, registry access      | Process audits, access control tests            | Security & Platform   | Medium – depends on review rigor |
| OPS-021  | Operational | Regression suite, CI                 | Coverage reports, QA gate monitoring            | QA Team               | Medium – requires continuous attention |
| BUS-016  | Business | Metadata store, manifests              | Schema validation, compliance evidence audits   | Compliance Office     | Low with enforcement |

## Risk-Based Testing Strategy

### Priority 1: Critical & High Risks
- Automated checks on versioning/changelog accuracy (DATA-020).
- Diff command fixture suite and publish pipeline approval tests (TECH-015, SEC-016).
- Regression coverage enforcement metrics and gating (OPS-021).

### Priority 2: Medium Risks
- Metadata completeness validation and evidence sync testing (BUS-016).

### Priority 3: Baseline Regression
- Smoke tests verifying diff output integrates with admin UI and manifests.
- Monitoring release pipelines for unauthorized actions.

## Risk Acceptance Criteria

### Must Fix Before Production
- DATA-020 and SEC-016 controls must guarantee versioned, approved releases.
- TECH-015/OPS-021 mitigations must demonstrate accurate diff output and regression coverage.

### Can Deploy with Mitigation
- BUS-016 acceptable when metadata completeness dashboards and schema enforcement exist.

### Accepted Risks
- None accepted currently.

## Monitoring Requirements
- Track rule releases, changelog updates, diff command usage, and regression suite run results.
- Monitor metadata completeness metrics and audit log entries for approvals.

## Risk Review Triggers
- Introduction of new rule categories or external regulatory updates.
- Changes to package publishing tools or registry.
- Audit findings highlighting rule governance gaps.

## Recommendations Summary
- Automate rule release governance end-to-end.
- Keep diff tooling and regression coverage comprehensive to prevent policy regressions.
- Maintain metadata accuracy for audit readiness.

Risk profile: docs/qa/assessments/5.1-risk-20250926.md
