# Risk Profile: Story 1.1

Date: 2025-09-26
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 5
- Critical Risks: 0
- High Risks: 3
- Risk Score: 60/100

Story 1.1 introduces the canonical data contracts and seed configurations that every downstream DocuGen component will consume. The major risks cluster around data fidelity and shared-type governance. Without tight coupling between TypeScript typings, JSON Schema outputs, and seed coverage, subsequent stories inherit systemic data drift.

## Critical Risks Requiring Immediate Attention

_No critical (score 9) risks identified._

## High-Risk Items

### 1. TECH-001: Divergent Schema Sources of Truth
**Score:** 6 (High)

- **Probability:** Medium (2) – Manual maintenance of both TypeScript interfaces and JSON Schema exports invites drift as stories iterate quickly.
- **Impact:** High (3) – Mismatched runtime validation vs. compile-time types can corrupt manifests and invalidate regulatory evidentiary chains.
- **Mitigation:**
  - Adopt single-source schema generation (e.g., Zod/TypeBox) with automated JSON Schema emission.
  - Add contract snapshot tests in CI to detect schema deltas before merge.
  - Require schema PRs to include affected seed diff output.
- **Testing Focus:** Contract comparison tests; CLI validation regression suite using golden configs.

### 2. DATA-001: Seed Coverage Gaps for Multi-Income Scenarios
**Score:** 6 (High)

- **Probability:** High (3) – Seed authors may bias toward simple salary history, neglecting allowances and irregular cadences.
- **Impact:** Medium (2) – Downstream ACs (responsible lending checks) will misfire, blocking bundle approval during demos.
- **Mitigation:**
  - Curate persona library covering contractor, multiple-employer, and seasonal income cases.
  - Introduce seed linting that validates presence of secondary income streams.
  - Schedule cross-team review of seed personas with compliance stakeholders.
- **Testing Focus:** Scenario-based integration tests verifying CLI validation on each persona; diff-based regression on generated manifests.

### 3. BUS-001: Schema Missing Compliance-Required Fields
**Score:** 6 (High)

- **Probability:** Medium (2) – Regulatory attributes (e.g., customer consent timestamps) may be deferred until later epics.
- **Impact:** High (3) – Missing data prevents compliance evidence stories (Epic 5) from meeting audit obligations, forcing rework.
- **Mitigation:**
  - Tie schema backlog to PRD compliance matrix; require traceability review before approving schema changes.
  - Add checklist step ensuring every new field references regulation or internal policy ID.
  - Prototype compliance mapping in documentation alongside schema release notes.
- **Testing Focus:** Schema-to-requirement traceability tests; contract validation ensuring mandatory fields cannot be omitted.

## Medium-Risk Items

### 4. OPS-001: CLI Validation Errors Lack Actionable Messaging
**Score:** 4 (Medium)

- **Probability:** Medium (2) – Validation rules can return generic error strings without contextual hints.
- **Impact:** Medium (2) – Operators lose time triaging configs, slowing adoption of deterministic pipelines.
- **Mitigation:**
  - Enforce structured error format that includes path, offending value, and remediation hints.
  - Add usability acceptance tests asserting guidance quality for common failure cases.
  - Capture validation telemetry to identify confusing messages in staging runs.
- **Testing Focus:** CLI contract tests asserting error payload structure; UX review of documentation snippets.

### 5. TECH-002: Schema Evolution Breaks Downstream Consumers
**Score:** 4 (Medium)

- **Probability:** Medium (2) – Subsequent stories (1.2, 1.3) depend on schema modules before versioning strategy is stabilised.
- **Impact:** Medium (2) – Silent breaking changes will cascade into orchestrator and renderer failures.
- **Mitigation:**
  - Introduce semantic versioning for schema package with changelog automation.
  - Require fixture regeneration check in CI whenever schema snapshot changes.
  - Define deprecation policy and announce removals two releases ahead.
- **Testing Focus:** Backwards-compatibility unit tests; integration tests running prior schema versions against new validators.

## Risk Distribution

### By Category
- Technical: 2 risks (0 critical, 1 high, 1 medium)
- Data: 1 risk (0 critical, 1 high)
- Business: 1 risk (0 critical, 1 high)
- Operational: 1 risk (0 critical, 0 high, 1 medium)
- Security: 0 risks (0 critical)
- Performance: 0 risks (0 critical)

### By Component
- CLI Validation Pipeline: 2 risks
- Schema Package: 2 risks
- Seed Repository: 1 risk

## Risk Matrix

| Risk ID  | Description                                  | Probability | Impact | Score | Priority |
|----------|----------------------------------------------|-------------|--------|-------|----------|
| TECH-001 | Divergent schema sources of truth             | Medium (2)  | High (3) | 6   | High     |
| DATA-001 | Seed coverage gaps for multi-income scenarios | High (3)    | Medium (2) | 6 | High     |
| BUS-001  | Schema missing compliance-required fields     | Medium (2)  | High (3) | 6   | High     |
| OPS-001  | CLI validation errors lack actionable detail  | Medium (2)  | Medium (2) | 4 | Medium   |
| TECH-002 | Schema evolution breaks downstream consumers  | Medium (2)  | Medium (2) | 4 | Medium   |

## Detailed Risk Register

| Risk ID  | Category | Components Affected                 | Detection Method                       | Mitigation Owner | Residual Risk |
|----------|----------|-------------------------------------|----------------------------------------|------------------|----------------|
| TECH-001 | Technical | Schema codegen, validation service  | Schema diff review                     | Dev Lead         | Low after automation |
| DATA-001 | Data     | Seed repo, CLI fixtures             | Scenario coverage analysis             | Data SME         | Medium – ongoing persona drift |
| BUS-001  | Business | Compliance mapping, documentation   | Compliance traceability workshop       | Product & Compliance | Medium – pending governance sign-off |
| OPS-001  | Operational | CLI UX, operator docs            | SRE/operator feedback on validation UX | Platform Ops     | Low – with telemetry loop |
| TECH-002 | Technical | CLI orchestrator, renderer adapters | Integration regression failures        | Platform Engineering | Medium – requires versioning discipline |

## Risk-Based Testing Strategy

### Priority 1: High-Risk Tests
- Automated snapshot tests covering schema/JSON Schema parity (TECH-001).
- Persona-driven integration suite verifying multi-income validations (DATA-001).
- Compliance traceability checks mapping seed + schema fields to PRD matrix (BUS-001).

### Priority 2: Medium-Risk Tests
- CLI usability tests that assert structured error payloads and documentation links (OPS-001).
- Backwards-compatibility regression suite running older manifests against validators (TECH-002).

### Priority 3: Baseline Regression
- Standard unit tests for schema parsers and config loaders.
- CLI end-to-end smoke using canonical seed bundles.

## Risk Acceptance Criteria

### Must Fix Before Production
- Resolve TECH-001 and BUS-001 before schema release candidate.
- Ensure DATA-001 mitigations are in place prior to compliance story kick-off.

### Can Deploy with Mitigation
- OPS-001 acceptable with structured error format and telemetry backlog.
- TECH-002 acceptable if semantic versioning guardrails and deprecation policy are enforced.

### Accepted Risks
- None at this stage; revisit after initial schema promotion.

## Monitoring Requirements
- Add validation error telemetry segmented by rule and seed persona.
- Track schema package versions consumed by CLI and renderer services via manifests.
- Monitor seed repository changes with automated diff reports in CI.

## Risk Review Triggers
- Schema package version bump or addition of new institution personas.
- Introduction of new validation rules or CLI execution modes.
- Feedback from compliance detailing missing attributes or audit gaps.

## Recommendations Summary
- Prioritise contract automation to prevent schema drift.
- Expand seed personas with compliance-reviewed fixtures and keep them under governance.
- Formalise schema versioning + traceability workflow before integrating with downstream stories.

Risk profile: docs/qa/assessments/1.1-risk-20250926.md
