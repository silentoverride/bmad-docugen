# Test Design: Story 1.1

Date: 2025-09-26
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 9
- Unit tests: 5 (55.6%)
- Integration tests: 3 (33.3%)
- E2E tests: 1 (11.1%)
- Priority distribution: P0: 6, P1: 2, P2: 1

## Test Scenarios by Acceptance Criteria

### AC1: Schema covers applicant identity, employment, income cadence, accounts, and document selection with TypeScript typings and JSON Schema exports.

#### Scenarios

| ID           | Level       | Priority | Test                                                                 | Justification                                                                 |
| ------------ | ----------- | -------- | -------------------------------------------------------------------- | ----------------------------------------------------------------------------- |
| 1.1-UNIT-001 | Unit        | P0       | Validate applicant/account schema enforces required fields & formats | Pure schema logic; ensures baseline data integrity without external systems.  |
| 1.1-UNIT-002 | Unit        | P0       | Verify JSON Schema exports match TypeScript definitions              | Confirms generator fidelity; isolated transformation logic.                   |
| 1.1-INT-001  | Integration | P0       | Load schema module through CLI manifest builder to confirm alignment | Exercises boundary between schema package and CLI consumers.                  |

### AC2: Seed data set demonstrates multi-income scenarios and configurable statement ranges aligned with brief goals.

#### Scenarios

| ID           | Level       | Priority | Test                                                                 | Justification                                                                 |
| ------------ | ----------- | -------- | -------------------------------------------------------------------- | ----------------------------------------------------------------------------- |
| 1.1-UNIT-003 | Unit        | P1       | Generate seed data covering multi-income and statement toggles       | Deterministic data generation logic; no external dependencies.                |
| 1.1-INT-002  | Integration | P1       | Inject seed configs through CLI loader to ensure schema compatibility | Validates integration of seeds with validation pipeline and downstream usage. |

### AC3: Config validation rejects missing or ill-formed sections with actionable error messages surfaced through CLI.

#### Scenarios

| ID           | Level       | Priority | Test                                                                        | Justification                                                                  |
| ------------ | ----------- | -------- | ---------------------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| 1.1-UNIT-004 | Unit        | P0       | Validator returns field-level errors for missing/invalid sections           | Pure validation logic; critical feedback quality.                              |
| 1.1-INT-003  | Integration | P0       | CLI validation command exits non-zero and surfaces structured error payloads | Ensures CLI wiring propagates validator output correctly.                      |
| 1.1-E2E-001  | E2E         | P0       | Run CLI with malformed config to confirm user-facing error messaging flow   | Confirms full user journey with actual binaries and sample assets.             |

### AC4: Documentation explains how to extend the schema for future institutions without breaking deterministic behaviour.

#### Scenarios

| ID           | Level | Priority | Test                                                                     | Justification                                                                  |
| ------------ | ----- | -------- | ------------------------------------------------------------------------ | ------------------------------------------------------------------------------ |
| 1.1-UNIT-005 | Unit  | P2       | Lint documentation to verify extension guidelines cover schema & seeds   | Lightweight doc test ensuring guidance stays complete and version-controlled. |

## Risk Coverage

No dedicated risk profile exists yet. All P0 scenarios focus on data integrity and CLI usability to mitigate the highest impact failures.

## Recommended Execution Order

1. P0 unit tests (1.1-UNIT-001, 1.1-UNIT-002, 1.1-UNIT-004)
2. P0 integration tests (1.1-INT-001, 1.1-INT-003)
3. P0 E2E test (1.1-E2E-001)
4. P1 tests (1.1-UNIT-003, 1.1-INT-002)
5. P2 test (1.1-UNIT-005)

## Quality Checklist

- [x] Every AC has test coverage
- [x] Test levels are appropriate (not over-testing)
- [x] No duplicate coverage across levels
- [x] Priorities align with business risk
- [x] Test IDs follow naming convention
- [x] Scenarios are atomic and independent
